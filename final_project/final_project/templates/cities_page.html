{% extends "base.html" %}

{% block content %}

<br/>
<div class="card" style="width: 18rem;">
  <img class="card-img-top" src={{data.flagImageUri}} alt="Card image cap">

    <div class="card-body">
        <h5 class="card-title">{{data.name}} - {{data.code}} </h5>

        <p> Capital: {{data.capital}} </p>

        <button onclick="handle_fav('{{data.code}}')" type="button" class="btn btn-default btn-sm">
            <span>
                {% if is_favorite %}
                    <i id="icon-{{data.code}}--filled" class="bi bi-heart-fill"></i>
                {% else %}
                    <i id="icon-{{data.code}}--unfilled" class="bi bi-heart"></i>
                {%endif%}
            </span>
        </button>
    </div>
</div>

<div class="cities_grid">
    {%for city in cities.items%}
        <div class="card" style="width: 18rem;">
            <div class="card-body">
                <h5 class="card-title">{{city.name}}</h5>

                <h6>Region: {{city.region}} - {{city.regionCode}}</h6>

                <h6>Population: {{city.population}}</h6>

                <div>
                    <iframe width="100%" height="100%" src="https://maps.google.com/maps?q={{city.latitude}},{{city.longitude}}&ie=UTF8&iwloc=&output=embed" scrolling="no" marginheight="0" marginwidth="0"></iframe>
                </div>

                <button onclick="handle_fav_city('{{data.code}}', '{{city.id}}')" type="button" class="btn btn-default btn-sm">
                    <span>
                        {% if city.is_favorite %}
                            <i id="icon-{{data.code}}-{{city.id}}--filled" class="bi bi-heart-fill"></i>
                        {% else %}
                            <i id="icon-{{data.code}}-{{city.id}}--unfilled" class="bi bi-heart"></i>
                        {%endif%}
                    </span>
                </button>

                <a class="btn btn-default btn-sm" href="https://google.com/maps/search/?api=1&query={{city.latitude}},{{city.longitude}}" target="_blank">
                    View it on maps!
                </a>
            </div>
        </div>
    {%endfor%}
</div>

{%if cities.total_pages > 1%}
  <section aria-label="Page navigation">
      <ul class="pagination">
          <li class="page-item">
              <button class="page-link" onclick="previous_page()" type="button"
                  {%if cities.is_first_page%}
                      disabled
                  {%endif%}
              >
                  Previous
              </button>
          </li>

          <li class="page-item"><button class="page-link" disabled>{{cities.current_page}} of {{cities.total_pages}}</button></li>

          <li class="page-item">
              <button class="page-link" onclick="next_page()" type="button"
                  {%if cities.is_last_page%}
                      disabled
                  {%endif%}
              >
                  Next
              </button>
          </li>
      </ul>
  </section>
{%endif%}

{% endblock %}
